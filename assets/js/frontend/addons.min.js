jQuery(function(y){var b={isGroupedMixedProductType:function(){var a=y(".product-type-grouped"),o=0,t=0;return!!(a.length&&(a.find(".group_table tr.product").each(function(){0<y(this).find(".input-text.qty").val()&&(y(this).find(".entry-summary .subscription-details").length?o++:t++)}),0<o&&0<t))},escapeHtml:function(a){return document.createElement("div").appendChild(document.createTextNode(a)).parentNode.innerHTML},isGroupedSubsSelected:function(){var a=y(".product-type-grouped"),o=!1;return a.length&&a.find(".group_table tr.product").each(function(){if(0<y(this).find(".input-text.qty").val()&&y(this).find(".entry-summary .subscription-details").length)return!(o=!0)}),o},formatMoney:function(a){let o=woocommerce_addons_params.currency_format_num_decimals;var t;return woocommerce_addons_params.trim_trailing_zeros&&(t=parseFloat(a)%1==0,a=parseFloat(a),o=t?0:a.toString().split(".")[1].length),accounting.formatMoney(a,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:o,format:woocommerce_addons_params.currency_format})},init:function(a){var w=!1,g=a,h=g.get(0),v=!!g.hasClass("variations_form")&&g.find('input[name="variation_id"], input.variation_id'),a=(y(".variations_form").on("woocommerce_variation_select_change",function(){g.trigger("woocommerce-product-addons-update")}),g.on("click",".reset_variations",function(){w=!1,y.each(g.find(".product-addon"),function(){var a=y(this).find(".addon");(a.is(":checkbox")||a.is(":radio"))&&a.prop("checked",!1),a.is("select")&&a.prop("selectedIndex",0),(a.is(":text")||a.is("textarea")||a.is('input[type="number"]')||a.is('input[type="file"]'))&&a.val("")}),g.trigger("woocommerce-product-addons-update")}).on("keyup change",".wc-pao-addon input, .wc-pao-addon textarea",function(){var a;0<y(this).attr("maxlength")&&(a=y(this).val(),a=y(this).attr("maxlength")-a.length,y(this).next(".wc-pao-addon-chars-remaining").addClass("visible").find("span").text(a))}).on("change",".wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select, input.qty, .wc-pao-addon-custom-text",function(){g.trigger("woocommerce-product-addons-update")}).on("found_variation",function(a,o){var t=y(this),e=t.find("#product-addons-total");void 0!==o.display_price?e.data("price",o.display_price):y(o.price_html).find(".amount").last().length&&(o=(o=(o=(o=(o=y(o.price_html).find(".amount").last().text()).replace(woocommerce_addons_params.currency_format_symbol,"")).replace(woocommerce_addons_params.currency_format_thousand_sep,"")).replace(woocommerce_addons_params.currency_format_decimal_sep,".")).replace(/[^0-9\.]/g,""),o=parseFloat(o),e.data("price",o)),t.trigger("woocommerce-product-addons-update")}).on("woocommerce-product-addons-update",function(){var a,t,o,e,n,c,d,i,r="form"!==h.tagName.toLowerCase()||h.checkValidity(),m=0,_=0,s=g.find("#product-addons-total"),p=v&&0<v.length,l=g.find(".wcsatt-options-product"),u=0<l.length,p=(product_id=p?v.val():s.data("product-id"),product_price=s.data("price"),product_type=s.data("type"),qty=parseFloat(g.find("input.qty").val()),addons=[],parseInt(product_id)),f=1===s.data("show-incomplete-sub-total");w=!(!r||!p)||f,""===product_price&&"undefined"!=typeof custom_gift_card_amount&&custom_gift_card_amount.length&&0<custom_gift_card_amount.val()&&(product_price=custom_gift_card_amount.val()),woocommerce_addons_params.is_bookings&&y(".wc-bookings-booking-cost").length&&(product_price=parseFloat(y(".wc-bookings-booking-cost").attr("data-raw-price"))),g.find(".wc-pao-addon-field").each(function(){var a,o,t,e=y(this),n=e.parents(".wc-pao-addon"),c=n.find(".wc-pao-addon-name").length?n.find(".wc-pao-addon-name").data("addon-name"):"",d="",i=0,r=0,s=e.data("price-type"),p=!1,l={},u=!!n.find(".wc-pao-addon-name").length&&n.find(".wc-pao-addon-name").data("has-per-person-pricing"),n=!!n.find(".wc-pao-addon-name").length&&n.find(".wc-pao-addon-name").data("has-per-block-pricing");if(e.is(".wc-pao-addon-custom-price")){if(!e.val())return;p=!0,i=e.val(),r=e.val(),s="quantity_based"}else if(e.is(".wc-pao-addon-input-multiplier")){if(isNaN(e.val())||""===e.val()?(e.val(""),e.closest("p").find(".wc-pao-addon-alert").show()):(""!==e.val()&&e.val(Math.ceil(e.val())),e.closest("p").find(".wc-pao-addon-alert").hide()),!e.val())return;i=e.data("price")*e.val(),r=e.data("raw-price")*e.val()}else if(e.is(".wc-pao-addon-checkbox, .wc-pao-addon-radio")){if(!e.is(":checked"))return;d=e.data("label"),i=e.data("price"),r=e.data("raw-price")}else if(e.is(".wc-pao-addon-image-swatch-select, .wc-pao-addon-select")){if(!e.find("option:selected")||""===e.find("option:selected").val())return;s=e.find("option:selected").data("price-type"),e.val()&&(d=e.find("option:selected").data("label"),i=e.find("option:selected").data("price"),r=e.find("option:selected").data("raw-price"))}else{if(!e.val())return;i=e.data("price"),r=e.data("raw-price")}switch(i=i||0,r=r||0,"booking"!==product_type&&"accommodation-booking"!==product_type||!woocommerce_addons_params.is_bookings||(void(a=qty=0)!==y("#wc_bookings_field_duration")&&0<y("#wc_bookings_field_duration").val()&&(a=y("#wc_bookings_field_duration").val()),void 0!==y("#wc-bookings-form-end-time")&&0<y("#wc-bookings-form-end-time").val()&&(a=y("#wc-bookings-form-end-time").val()),t=y("#wc_bookings_field_persons"),o=0,1===t.length?o=parseInt(o,10)+parseInt(t.val(),10):y(".wc-bookings-booking-form").find("input").each(function(){var a=this.id.match(/wc_bookings_field_persons_(\d+)/);null!=a&&y("#"+a[0]).length&&(o=parseInt(o,10)+parseInt(y("#"+a[0]).val(),10))}),0===qty&&y(".wc-bookings-booking-cost").length&&(qty=1),u&&o&&(qty*=o),n&&a&&(qty*=a)),s){case"flat_fee":l.cost=parseFloat(i),l.cost_raw=parseFloat(r);break;case"quantity_based":l.cost_pu=parseFloat(i),l.cost_raw_pu=parseFloat(r),l.cost=l.cost_pu*qty,l.cost_raw=l.cost_raw_pu*qty;break;case"percentage_based":l.cost_pct=parseFloat(i)/100,l.cost_raw_pct=parseFloat(r)/100,l.cost=parseFloat(product_price)*l.cost_pct*qty,l.cost_raw=parseFloat(product_price)*l.cost_raw_pct*qty}m+=l.cost||0,_+=l.cost_raw||0,void 0!==d&&("number"==typeof d||d.length?l.name=c+(d?" - "+d:""):(t=e.val(),(u=parseInt(woocommerce_addons_params.trim_user_input_characters,10))<(t=e.is(".wc-pao-addon-file-upload")?t.replace(/^.*[\\\/]/,""):t).length&&(t=t.slice(0,u)+"..."),l.name=c+" - "+b.escapeHtml(t)),l.is_custom_price=p,l.price_type=s,addons.push(l))}),s.data("price_data",addons),qty&&(b.formatMoney(m),"undefined"!=typeof product_price&&product_id&&(a=y(".wc-bookings-booking-form").length?isNaN(product_price)?0:parseFloat(product_price):parseFloat(product_price*qty),t=b.formatMoney(a+m)),u?(r=g.data("satt_script"))&&r.schemes_model.get_active_scheme_key()&&((p=l.find("input:checked")).val()&&(o=p.parent().find(".subscription-details"))):g.parent().find(".subscription-details").length&&!g.hasClass("bundle_data")&&(o=g.parent().find(".subscription-details"),v&&0<v.length&&(o=g.parent().find(".woocommerce-variation .subscription-details"))),o&&0<o.length&&(e=" "+o.clone().wrap("<p>").parent().html()),"grouped"===product_type?e&&!isGroupedMixedProductType()&&isGroupedSubsSelected()&&(t&&(t+=e)):e&&t&&(t+=e),t&&"1"==s.data("show-sub-total"))?(f=g.find(".wc-pao-addon-container").data("product-name"),u=b.formatMoney(a),n=y(".wc-bookings-booking-form").length?'<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong>'+f+'</strong></div><div class="wc-pao-col2"><strong><span class="amount">'+u+"</span></strong></div></li>":'<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong><span>'+(x()?woocommerce_addons_params.quantity_symbol+qty:qty+woocommerce_addons_params.quantity_symbol)+"</span> "+f+'</strong></div><div class="wc-pao-col2"><strong><span class="amount">'+u+"</span></strong></div></li>",c=!1,addons.length&&(y.each(addons,function(a,o){var t;"quantity_based"===o.price_type&&(t=0===(t=o.cost)?"-":b.formatMoney(t),n=n+'<li class="wc-pao-row-quantity-based"><div class="wc-pao-col1">'+o.name+'</div><div class="wc-pao-col2"><span class="amount">'+t+"</span></div></li>"),woocommerce_addons_params.tax_enabled&&o.is_custom_price&&(c=!0)}),y.each(addons,function(a,o){let t;var e;"quantity_based"!==o.price_type&&(e=0===(t="percentage_based"!==o.price_type?o.cost:o.cost_raw)?"-":'<span class="amount">'+b.formatMoney(t)+"</span>",n=n+'<li><div class="wc-pao-col1"><strong>'+o.name+'</strong></div><div class="wc-pao-col2">'+e+"</div></li>")})),d="",i=void 0===s.data("i18n_sub_total")?woocommerce_addons_params.i18n_sub_total:s.data("i18n_sub_total"),c||woocommerce_addons_params.price_display_suffix&&woocommerce_addons_params.tax_enabled?c||!1!=-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_including_tax}")||!1!=-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_excluding_tax}")?y.ajax({type:"POST",url:woocommerce_addons_params.ajax_url,data:{action:"wc_product_addons_calculate_tax",product_id:product_id,add_on_total:m,add_on_total_raw:_,qty:qty},success:function(a){var o;n="SUCCESS"==a.result?(d='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>",o=b.formatMoney(a.price_including_tax),a=b.formatMoney(a.price_excluding_tax),d=(d=d.replace("{price_including_tax}",'<span class="amount">'+o+"</span>")).replace("{price_excluding_tax}",'<span class="amount">'+a+"</span>"),o=woocommerce_addons_params.display_include_tax?o:a,n+'<li class="wc-pao-subtotal-line"><p class="price">'+i+' <span class="amount">'+o+"</span> "+d+" </p></li></ul></div>"):n+'<li class="wc-pao-subtotal-line"><p class="price">'+i+' <span class="amount">'+t+"</span></p></li></ul></div>",w?s.html(n):s.html(""),g.trigger("updated_addons")},error:function(){n=n+'<li class="wc-pao-subtotal-line"><p class="price">'+i+' <span class="amount">'+t+"</span></p></li></ul></div>",w?s.html(n):s.html(""),g.trigger("updated_addons")}}):(n=n+'<li class="wc-pao-subtotal-line"><strong>'+i+' <span class="amount">'+t+"</span> "+woocommerce_addons_params.price_display_suffix+"</strong></li></ul></div>",w?s.html(n):s.html(""),g.trigger("updated_addons")):(n=n+'<li class="wc-pao-subtotal-line"><p class="price">'+i+' <span class="amount">'+t+"</span></p></li></ul></div>",w?s.html(n):s.html(""),g.trigger("updated_addons"))):(s.empty(),g.trigger("updated_addons"))}).on("click touchend",".wc-pao-addon-image-swatch",function(a){a.preventDefault();var a=y(this).data("value"),o=y(this).parents(".wc-pao-addon-wrap"),t=y.parseHTML(y(this).data("price"));o.prevAll("label").find(".wc-pao-addon-image-swatch-price").remove(),o.find(".wc-pao-addon-image-swatch").removeClass("selected"),y(this).addClass("selected"),o.find(".wc-pao-addon-image-swatch-select").val(a),o.prevAll("label").append(y(t)),g.trigger("woocommerce-product-addons-update")}),g.find(" .wc-pao-addon-custom-text, .wc-pao-addon-custom-textarea").each(function(){0<y(this).attr("maxlength")&&y(this).after('<small class="wc-pao-addon-chars-remaining">'+woocommerce_addons_params.i18n_remaining+"</small>")}),y("#credit_called").on("keyup",function(){g.trigger("woocommerce-product-addons-update")}),g.trigger("woocommerce-product-addons-update"),g.get(0).querySelector('button[type="submit"]'));a&&a.addEventListener("click",function(){var a=g.get(0).querySelector("*:invalid");a&&(a.focus(),a.scrollIntoView({block:"center"}))}),y(".wc-pao-addon-image-swatch").tipTip({delay:200})}},x=function(){return"rtl"===document.documentElement.dir};y("body").on("quick-view-displayed",function(){y(this).find(".cart:not(.cart_group)").each(function(){b.init(y(this))})}),y("body .component").on("wc-composite-component-loaded",function(){y(this).find(".cart").each(function(){b.init(y(this))})}),y("body").find(".cart:not(.cart_group)").each(function(){b.init(y(this))}),y("body").find(".wc-pao-addon-checkbox-group-required").each(function(){var a=this;y(this).find(".wc-pao-addon-checkbox").change(function(){0<y(a).find("input:checked").length?(y(a).removeClass("wc-pao-addon-checkbox-required-error"),y(a).find("input").each(function(){y(this).attr("required",!1)})):(y(a).addClass("wc-pao-addon-checkbox-required-error"),y(a).find("input").each(function(){y(this).attr("required",!0)}))})})});